# 프로젝트에서 사용하는 외부 서비스 정보 문서

## 1. 소셜 인증 서비스

### 1.1 Google OAuth2
**목적**: 사용자 소셜 로그인 및 인증

**가입 및 설정 정보**
- **개발자 콘솔**: Google Cloud Console (https://console.cloud.google.com/)
- **프로젝트명**: LAGO 주식 시뮬레이션
- **클라이언트 ID**: `872605543976-dcasbhgbmsf3j4821ntsed50267dlpqr.apps.googleusercontent.com`
- **클라이언트 시크릿**: `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`
- **리다이렉트 URI**: `http://localhost:8081/oauth2/callback/google`

**설정 방법**
1. Google Cloud Console에서 새 프로젝트 생성
2. OAuth 2.0 클라이언트 ID 발급
3. 승인된 리다이렉트 URI 설정
4. 애플리케이션에 클라이언트 정보 등록

**사용 범위**
- 기본 프로필 정보 (이름, 이메일)
- 사용자 인증 및 세션 관리

### 1.2 Kakao OAuth2
**목적**: 카카오 계정을 통한 소셜 로그인

**가입 및 설정 정보**
- **개발자 플랫폼**: Kakao Developers (https://developers.kakao.com/)
- **앱 이름**: LAGO 주식 투자 시뮬레이션
- **클라이언트 ID (REST API 키)**: `a7471cf356e26d8fa4b117381feebfd3`
- **클라이언트 시크릿**: `Q0OzPazbOFuYbb1Cg2qLHQDkytKaYcaa`
- **리다이렉트 URI**: `http://localhost:8081/oauth2/callback/kakao`

**설정 방법**
1. Kakao Developers에서 애플리케이션 등록
2. 카카오 로그인 활성화
3. Redirect URI 설정
4. 개인정보 보호항목 설정 (닉네임, 이메일)

**사용 범위**
- 카카오 계정 정보 (닉네임, 이메일)
- 사용자 식별 및 인증

## 2. Firebase 서비스

### 2.1 Firebase Cloud Messaging (FCM)
**목적**: 모바일 앱 푸시 알림 서비스

**가입 및 설정 정보**
- **플랫폼**: Firebase Console (https://console.firebase.google.com/)
- **프로젝트명**: LAGO Stock Simulator
- **서비스 계정**: 비공개 키 기반 인증
- **서비스 계정 키 파일**: `firebaseServiceAccountKey.json`

**설정 방법**
1. Firebase Console에서 새 프로젝트 생성
2. Android 앱 추가 및 패키지명 등록
3. Cloud Messaging 활성화
4. 서비스 계정 생성 및 비공개 키 다운로드
5. Spring Boot 애플리케이션에 Firebase Admin SDK 설정

**사용 기능**
- 주식 가격 알림
- 거래 체결 알림
- AI 추천 알림
- 시스템 공지사항

**코드 설정**
```java
// FirebaseConfig.java
@Configuration
public class FirebaseConfig {
    @PostConstruct
    public void initialize() throws IOException {
        FileInputStream serviceAccount = new FileInputStream("firebaseServiceAccountKey.json");
        FirebaseOptions options = FirebaseOptions.builder()
            .setCredentials(GoogleCredentials.fromStream(serviceAccount))
            .build();
        FirebaseApp.initializeApp(options);
    }
}
```

## 3. 한국투자증권 KIS API

### 3.1 KIS Open API
**목적**: 실시간 주식 시세 및 거래 정보 조회

**가입 및 설정 정보**
- **플랫폼**: 한국투자증권 Open API (https://apiportal.koreainvestment.com/)
- **API 타입**: 실전투자계좌 연동 API
- **계정 A**: 
  - App Key: `PSXLaNAHtahIBQwCFTBJNGczBiVStg891SM4`
  - App Secret: `0GEAdZOqIFNYJaMz3wm33XxpCcU5Xa7wDdAJZ8DzH0vK+mtRVX0AlhRFXcKw7t2UzNL8ldEwYYCSpGKMrah0ASzeLM4xvC4VuIvmdD+WfsuDC7jVYFSakytwIk6nXv+0jCJATUSHv/gQlhKpqKekP3pmwgzyp9tAcBcwo6Kuemz0lOhxYL0=`
- **계정 B**:
  - App Key: `PSs28ViZ7UQIjQsIOOAA5VV4mm0p88OnfCMA`
  - App Secret: `G7H/UQho1+8VPP5OP4Fw9eIt5MgbyS6Tn5xmSrWDdOZGTQ9pg7BVNZG19zCw6ajea3tLLNR7rcwwtiFllsQKtiUjEBzxGb2RA6REedzIRF8DETU+Ytxt3x4sqSwY1W/oZAXm521kIE1M49xguvMxfUfoQwvykZyj3xW0HTahfE0W/3A+MIU=`

**설정 방법**
1. 한국투자증권 계좌 개설
2. API 포털에서 개발자 등록
3. 애플리케이션 등록 및 App Key/Secret 발급
4. IP 주소 등록 (필요시)
5. 실전계좌 연동 승인

**사용 기능**
- 실시간 주식 시세 조회
- 종목 정보 조회
- 차트 데이터 수집
- 거래량 및 가격 정보

**API 엔드포인트**
- 기본 URL: `https://openapi.koreainvestment.com:9443`
- 인증: OAuth 2.0 기반
- 데이터 포맷: JSON

## 4. FinBERT 감정 분석 서비스

### 4.1 FinBERT AI 서비스
**목적**: 금융 뉴스 및 텍스트 감정 분석

**서비스 정보**
- **모델**: FinBERT (Financial BERT)
- **서버 URL**: `http://finbert-service:8000` (Docker 환경)
- **API 엔드포인트**: 
  - 분석: `/analyze`
  - 헬스체크: `/health`
- **클라이언트 타임아웃**: 30초

**설정 방법**
1. FinBERT 모델 서버 구축
2. Docker 환경에서 서비스 등록
3. Spring Boot 애플리케이션에서 WebClient 설정
4. 감정 분석 결과 처리 로직 구현

**사용 기능**
- 뉴스 기사 감정 분석 (긍정/부정/중립)
- AI 투자 전략 수립 지원
- 시장 심리 분석

**API 요청 예시**
```json
{
  "text": "삼성전자 주가가 상승하여 투자자들의 관심이 높아지고 있다.",
  "language": "ko"
}
```
=> 추가로 받은 노트북에서 따로 배포하던 서비스입니다.

## 5. Chart Analysis 패턴 분석 서비스

### 5.1 차트 패턴 분석 마이크로서비스
**목적**: 주식 차트 기술적 패턴 분석

**서비스 정보**
- **언어**: Python 3.9
- **프레임워크**: Flask 2.2.5
- **서버 URL**: `http://chart-analysis-service:8000` (Docker 환경)
- **외부 포트**: 5001

**주요 라이브러리**
- pandas 1.3.5: 데이터 처리
- numpy 1.24.4: 수치 계산
- plotly 5.18.0: 차트 시각화
- scipy 1.8.0: 통계 분석

**설정 방법**
1. Python 환경 설정
2. requirements.txt 의존성 설치
3. Docker 컨테이너 빌드
4. Spring Boot에서 WebClient 연동

**분석 가능한 패턴**
- Double Top/Bottom (이중 천정/바닥)
- Head and Shoulders (머리어깨형)
- Triangle Patterns (삼각형 패턴)
- Flag and Pennant (깃발/삼각 깃발)

**API 엔드포인트**
- 패턴 분석: `/detect-patterns`
- 헬스체크: `/health`

## 6. 기타 외부 연동 서비스

### 6.1 TimescaleDB Cloud (데이터베이스)
**목적**: 시계열 데이터 저장 및 분석

**연결 정보**
- **호스트**: i13d203.p.ssafy.io
- **포트**: 5432
- **데이터베이스**: stock_db
- **타입**: PostgreSQL with TimescaleDB extension

## 7. 보안 및 인증 설정

### 7.1 환경변수 관리
- **개발환경**: `.env` 파일 사용
- **운영환경**: Docker 환경변수 또는 시크릿 관리
- **민감 정보**: Git에서 제외 (`.gitignore` 설정)

### 7.2 API 키 보안
- 모든 API 키는 환경변수로 관리
- 하드코딩 금지
- 정기적인 키 갱신 권장

### 7.3 CORS 설정
```java
@CrossOrigin(origins = {"http://localhost:3000", "http://localhost:8081"})
```

## 8. 모니터링 및 헬스체크

### 8.1 Spring Boot Actuator
- **엔드포인트**: `/actuator/health`
- **개발환경**: 상세 정보 노출
- **운영환경**: 기본 정보만 노출

### 8.2 서비스별 헬스체크
- **Backend**: `/actuator/health`
- **Chart Analysis**: `/health`
- **FinBERT**: `/health`
- **TimescaleDB**: `pg_isready` 명령어
- **Redis**: 연결 상태 체크